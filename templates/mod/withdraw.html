{% extends 'mod/admbase.html' %}

{% block title%}
ADMIN WITHDRAW
{% endblock %}

{% block content%}
<div class="m-5">
<h1> WITHDRAW </h1>
<br>
<a href="{% url 'adm_withdraw' status='pending' %}">PENDING ||</a>
<a href="{% url 'adm_withdraw' status='done' %}">DONE ||</a>
<a href="{% url 'adm_withdraw' status='rejected' %}">REJECTED</a>
<table class="table table-dark table-striped">
  <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">USERNAME</th>
        <th scope="col">AMOUNT</th>
        <th scope="col">NAME</th>
        <th scope="col">ACC NO/ WALLET ID</th>
        <th scope="col">IFSC CODE</th>
        <th scope="col">STATUS</th>
        <th scope="col">ACTION</th>
      </tr>
    </thead>
    <tbody>
      {% for withdraw in withdraws %}
      {% if withdraw.withdraw_status == status %}
      <tr>
        <th scope="row">{{ withdraw.id }}</th>
        <td>{{ withdraw.user.username }}</td>
        <td>{{ withdraw.withdraw_amount }}</td>
        <td>{{ withdraw.account_name }}</td>
        {% if withdraw.account_no != None %}
        <td>{{ withdraw.account_no }}</td>
        {% elif withdraw.account_no == None %}
        <td>{{ withdraw.wallet_id }}</td>
        {% endif %}
        <td>
        {% if withdraw.ifsc_code != None %}
        {{ withdraw.ifsc_code }}
        {% endif %}
        </td>
        <td>{{ withdraw.withdraw_status }}</td>
        <td>
          {% if withdraw.withdraw_status == 'pending' %}
          <a href="{% url 'adm_withdraw_action' action='done' id=withdraw.id %}" > DONE </a>
          <a href="{% url 'adm_withdraw_action' action='rejected' id=withdraw.id %}" > REJECT </a>
          {% endif %}
        </td>
      </tr>
      {% endif %}
      {% endfor %}
    
    </tbody>
  </table>
{% endblock %}